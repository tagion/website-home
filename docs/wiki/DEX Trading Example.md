# DEX Trading Example


An example of the DEX matching and prices-discovery algorithm described in еру [Decentralised Exchange using Lightning Network ](https://github.com/tagion/content/blob/master/Decentralised%20Exchange%20using%20Lightning%20Network.md) and the [Trading flow using Lightning and Tagion Network](https://github.com/tagion/content/blob/master/Trading%20flow%20using%20Lightning%20and%20Tagion%20Network.md) 
 sections are shown in the following tables. The trading-order queue in table 21 and the two sorted sales lists are generated and displayed in table 22 and table 23.

**Table 21. DEX Trading-order-queue:**



| No  | Type | Syze   | P   | Q   | Eask   | Ebid    | Bought | Sold | Id  |
| --- | ---- | ------ | --- | --- | ------ | ------- | ------ | ---- | --- |
| 0   | ATO  | 83TGS  | 147 | 10  | 0.0680 | 14.7000 |        |      |     |
| 1   | ATO  | 6TGS   | 138 | 12  | 0.0870 | 11.5000 |        |      |     |
| 2   | BTO  | 785ACL | 116 | 10  | 0.0862 | 11.6000 |        |      |     |
| 3   | ATO  | 79TGS  | 149 | 10  | 0.0671 | 14.9000 |        |      |     |
| 4   | ATO  | 4TGS   | 113 | 10  | 0.0885 | 11.3000 |        |      |     |
| 5   | BTO  | 217ACL | 145 | 11  | 0.0759 | 13.1818 |        |      |     |
| 6   | BTO  | 936ACL | 115 | 13  | 0.1130 | 8.8462  |        |      |     |
| 7   | BTO  | 205ACL | 145 | 11  | 0.0759 | 13.1818 |        |      |     |
| 8   | BTO  | 949ACL | 146 | 10  | 0.0685 | 14.6000 |        |      |     |
| 9   | BTO  | 888ACL | 117 | 10  | 0.0855 | 11.7000 |        |      |     |
| 10  | BTO  | 587ACL | 112 | 10  | 0.0893 | 11.2000 |        |      |     |
| 11  | BTO  | 314ACL | 126 | 13  | 0.1032 | 9.6923  |        |      |     |
| 12  | BTO  | 503ACL | 118 | 12  | 0.1017 | 9.8333  |        |      |     |
| 13  | ATO  | 72TGS  | 106 | 12  | 0.1132 | 8.8333  |        |      |     |
| 14  | ATO  | 57TGS  | 108 | 13  | 0.1204 | 8.3077  |        |      |     |
| 15  | BTO  | 341ACL | 131 | 12  | 0.0916 | 10.9167 |        |      |     |
| 16  | ATO  | 15TGS  | 127 | 10  | 0.0787 | 12.7000 |        |      |     |
| 17  | ATO  | 43TGS  | 111 | 11  | 0.0991 | 10.0909 |        |      |     |
| 18  | BTO  | 85ACL  | 136 | 12  | 0.0882 | 11.3333 |        |      |     |
| 19  | ATO  | 29TGS  | 144 | 10  | 0.0694 | 14.4000 |        |      |     |
| 20  | ATO  | 63TGS  | 144 | 14  | 0.0972 | 10.2857 |        |      |     |
| 21  | BTO  | 716ACL | 134 | 11  | 0.0821 | 12.1818 |        |      |     |
| 22  | ATO  | 42TGS  | 139 | 12  | 0.0863 | 11.5833 |        |      |     |
| 23  | ATO  | 37TGS  | 114 | 13  | 0.1140 | 8.7692  |        |      |     |
| 24  | ATO  | 45TGS  | 136 | 10  | 0.0735 | 13.6000 |        |      |     |
| 25  | ATO  | 44TGS  | 131 | 12  | 0.0916 | 10.9167 |        |      |     |
| 26  | BTO  | 87ACL  | 134 | 10  | 0.0746 | 13.4000 |        |      |     |
| 27  | BTO  | 739ACL | 146 | 13  | 0.0890 | 11.2308 |        |      |     |
| 28  | ATO  | 16TGS  | 138 | 14  | 0.1014 | 9.8571  |        |      |     |
| 29  | ATO  | 42TGS  | 104 | 10  | 0.0962 | 10.4000 |        |      |     |
| 30  | ATO  | 79TGS  | 101 | 12  | 0.1188 | 8.4167  |        |      |     |
| 31  | BTO  | 725ACL | 117 | 13  | 0.1111 | 9.0000  |        |      |     |
| 32  | ATO  | 3TGS   | 144 | 13  | 0.0903 | 11.0769 |        |      |     |
| 33  | BTO  | 226ACL | 144 | 12  | 0.0833 | 12.0000 |        |      |     |
| 34  | ATO  | 30TGS  | 140 | 13  | 0.0929 | 10.7692 |        |      |     |
|35   |BTO   |526ACL  |131  |14   |0.1069  |9.3571   |        |      |     |

**Table 22. Sort list of ATO or the ask-sales list:**



| No  | Type | Size  | P   | Q   | Eask   | Ebid    | Bought | Sold | Id  |
| --- | ---- | ----- | --- | --- | ------ | ------- | ------ | ---- | --- |
| 14  | ATO  | 57TGS | 108 | 13  | 0.1204 | 8.3077  |        |      |     |
| 30  | ATO  | 79TGS | 101 | 12  | 0.1188 | 8.4167  |        |      |     |
| 23  | ATO  | 37TGS | 114 | 13  | 0.1140 | 8.7692  |        |      |     |
| 13  | ATO  | 72TGS | 106 | 12  | 0.1132 | 8.8333  |        |      |     |
| 28  | ATO  | 16TGS | 138 | 14  | 0.1014 | 9.8571  |        |      |     |
| 17  | ATO  | 43TGS | 111 | 11  | 0.0991 | 10.0909 |        |      |     |
| 20  | ATO  | 63TGS | 144 | 14  | 0.0972 | 10.2857 |        |      |     |
| 29  | ATO  | 42TGS | 104 | 10  | 0.0962 | 10.4000 |        |      |     |
| 34  | ATO  | 30TGS | 140 | 13  | 0.0929 | 10.7692 |        |      |     |
| 25  | ATO  | 44TGS | 131 | 12  | 0.0916 | 10.9167 |        |      |     |
| 32  | ATO  | 3TGS  | 144 | 13  | 0.0903 | 11.0769 |        |      |     |
| 4   | ATO  | 4TGS  | 113 | 10  | 0.0885 | 11.3000 |        |      |     |
| 1   | ATO  | 6TGS  | 138 | 12  | 0.0870 | 11.5000 |        |      |     |
| 22  | ATO  | 42TGS | 139 | 12  | 0.0863 | 11.5833 |        |      |     |
| 16  | ATO  | 15TGS | 127 | 10  | 0.0787 | 12.7000 |        |      |     |
| 24  | ATO  | 45TGS | 136 | 10  | 0.0735 | 13.6000 |        |      |     |
| 19  | ATO  | 29TGS | 144 | 10  | 0.0694 | 14.4000 |        |      |     |
| 0   | ATO  | 83TGS | 147 | 10  | 0.0680 | 14.7000 |        |      |     |
| 3   |ATO   |79TGS  |149  | 10  |0.0671  |14.9000  |        |      |     |


**Table 23. Sort list of BTO or the bid-sales list:**

| No  | Type | Size   | P   | Q   | Eask   | Ebid    | Bought | Sold | Id  |
| --- | ---- | ------ | --- | --- | ------ | ------- | ------ | ---- | --- |
| 8   | BTO  | 949ACL | 146 | 10  | 0.0685 | 14.6000 |        |      |     |
| 26  | BTO  | 87ACL  | 134 | 10  | 0.0746 | 13.4000 |        |      |     |
| 7   | BTO  | 205ACL | 145 | 11  | 0.0759 | 13.1818 |        |      |     |
| 5   | BTO  | 217ACL | 145 | 11  | 0.0759 | 13.1818 |        |      |     |
| 21  | BTO  | 716ACL | 134 | 11  | 0.0821 | 12.1818 |        |      |     |
| 33  | BTO  | 226ACL | 144 | 12  | 0.0833 | 12.0000 |        |      |     |
| 9   | BTO  | 888ACL | 117 | 10  | 0.0855 | 11.7000 |        |      |     |
| 2   | BTO  | 785ACL | 116 | 10  | 0.0862 | 11.6000 |        |      |     |
| 18  | BTO  | 85ACL  | 136 | 12  | 0.0882 | 11.3333 |        |      |     |
| 27  | BTO  | 739ACL | 146 | 13  | 0.0890 | 11.2308 |        |      |     |
| 10  | BTO  | 587ACL | 112 | 10  | 0.0893 | 11.2000 |        |      |     |
| 15  | BTO  | 341ACL | 131 | 12  | 0.0916 | 10.9167 |        |      |     |
| 12  | BTO  | 503ACL | 118 | 12  | 0.1017 | 9.8333  |        |      |     |
| 11  | BTO  | 314ACL | 126 | 13  | 0.1032 | 9.6923  |        |      |     |
| 35  | BTO  | 526ACL | 131 | 14  | 0.1069 | 9.3571  |        |      |     |
| 31  | BTO  | 725ACL | 117 | 13  | 0.1111 | 9.0000  |        |      |     |
| 6   |BTO   |936ACL  |115  |13   |0.1130  |8.8462   |        |      |     |


